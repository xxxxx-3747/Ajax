<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<script>

    function ajax(method, url, params) {
        method = method.toUpperCase();

        var xhr = new XMLHttpRequest();

        //如果传入的参数是Object类型
        if (typeof params == 'object') {
            //console.log('xxxx');
            var arr = [];
            for (var key in params) {
                var value = params[key];
                arr.push(key + '=' + value);
            }
            params = arr.join('&');
            //console.log(params);
        }


        //如果是get请求，需要设置
        if (method === 'GET') {
            url += '?' + params;
        }
        xhr.open(method, url);
        var data = null;
        //如果是post请求，需要设置
        if (method === 'POST') {
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            data = params;
        }

        // params = params || null;

        xhr.send(data);
        xhr.addEventListener("readystatechange", function () {
            if (this.readyState !== 4) {
                return;
            }
            console.log(this.responseText);
        })
    }


    ajax('get', 'http://localhost/Ajax/day2/time.php');
    ajax('get', 'http://localhost/Ajax/day2/test.php');
    ajax('post', 'http://localhost/Ajax/day2/add.php', 'key1=value1&key2=value2');
    ajax('post', 'http://localhost/Ajax/day2/add.php', {key1:'value1',key2:'value2'});
    //ajax('POST', 'http://localhost/Ajax/day2/add.php', { key1: 'value1', key2: 'value2' })


    //version3
    // function ajax(method, url, params) {
    //     method = method.toUpperCase();
    //
    //     var xhr = new XMLHttpRequest();
    //
    //     //如果传入的参数是Object类型
    //     if (typeof params == 'object') {
    //         //console.log('xxxx');
    //         var arr = [];
    //         for (var key in params) {
    //             var value = params[key];
    //             arr.push(key + '=' + value);
    //         }
    //         params = arr.join('&');
    //         //console.log(params);
    //     }
    //
    //
    //     //如果是get请求，需要设置
    //     if (method === 'GET') {
    //         url += '?' + params;
    //     }
    //     xhr.open(method, url);
    //     var data = null;
    //     //如果是post请求，需要设置
    //     if (method === 'POST') {
    //         xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    //         data = params;
    //     }
    //
    //     // params = params || null;
    //
    //     xhr.send(data);
    //     xhr.addEventListener("readystatechange", function () {
    //         if (this.readyState !== 4) {
    //             return;
    //         }
    //         console.log(this.responseText);
    //     })
    // }

    //version2
    // function ajax(method, url, params) {
    //     method = method.toUpperCase();
    //
    //     var xhr = new XMLHttpRequest();
    //     //如果是get请求，需要设置
    //     if (method === 'GET') {
    //         url += '?' + params;
    //     }
    //     xhr.open(method, url);
    //     var data = null;
    //     //如果是post请求，需要设置
    //     if (method === 'POST') {
    //         xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    //         data = params;
    //     }
    //
    //     // params = params || null;
    //
    //     xhr.send(data);
    //     xhr.addEventListener("readystatechange", function () {
    //         if (this.readyState !== 4) {
    //             return;
    //         }
    //         console.log(this.responseText);
    //     })
    // }


    //version1
    // function ajax(method, url, params) {
    //     method = method.toUpperCase();
    //
    //     var xhr = new XMLHttpRequest();
    //     xhr.open(method, url);
    //
    //     params = params || null;
    //
    //     xhr.send(params);
    //     xhr.addEventListener("readystatechange", function () {
    //         if (this.readyState !== 4) {
    //             return;
    //         }
    //         console.log(this.responseText);
    //     })
    // }


</script>

</body>
</html>